(this.webpackJsonpeflex_dashboard=this.webpackJsonpeflex_dashboard||[]).push([[0],{57:function(e,n,a){},87:function(e,n,a){},89:function(e,n,a){"use strict";a.r(n);var c=a(0),s=a.n(c),t=a(14),l=a.n(t),r=(a(57),a(27)),i=a.n(r),o=a(41),d=a(2),h=a(7),j=a(42),u=a.n(j),_=a(43),m=a(44),b=a(92),v=a(96),g=a(93),O=a(51),x=a(91),p=a(94),f=a(52),y=a(29),B=a.n(y);function S(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"object"===typeof e&&Object.keys(e).forEach((function(c){var s=e[c];"object"!==typeof s?a[n?"".concat(n,".").concat(c):c]=s:a=S(s,n?"".concat(n,".").concat(c):c,a)})),a}var I=a(97),C=a(47),N=a(1);function R(e){var n=e.onSearch,a=Object(c.useState)(""),s=Object(h.a)(a,2),t=s[0],l=s[1];return Object(N.jsxs)(I.a,{direction:"horizontal",gap:3,className:"border rounded p-3",children:[Object(N.jsx)(C.a,{placeholder:"Search by config key to filter",onChange:function(e){return l(e.target.value)},value:t}),Object(N.jsx)(x.a,{variant:"outline-primary",className:"mx-2",onClick:function(){return n(t)},children:"Search"}),Object(N.jsx)("div",{className:"vr"}),Object(N.jsx)(x.a,{variant:"outline-secondary",className:"mx-2",onClick:function(){return l(""),void n("")},children:"Reset"})]})}var k=a(95);function T(e){var n=e.errorMsg;return n?Object(N.jsx)(k.a,{variant:"danger",className:"m-2",children:n}):null}a(87);var w=function(){var e=Object(c.useState)({}),n=Object(h.a)(e,2),a=n[0],s=n[1],t=Object(c.useState)({}),l=Object(h.a)(t,2),r=l[0],j=l[1],y=Object(c.useState)(["boxIdBin","boxIdText","analog_channels.0.id","analog_channels.0.name","analog_channels.0.volt","analog_channels.0.ampRating","analog_channels.1.id","analog_channels.1.name","analog_channels.1.volt","analog_channels.1.ampRating","analog_channels.2.id","analog_channels.2.name","analog_channels.2.volt","analog_channels.2.ampRating","analog_channels.3.id","analog_channels.3.name","analog_channels.3.volt","analog_channels.3.ampRating","analog_channels.4.id","analog_channels.4.name","analog_channels.4.volt","analog_channels.4.ampRating","analog_channels.5.id","analog_channels.5.name","analog_channels.5.volt","analog_channels.5.ampRating","analog_channels.6.id","analog_channels.6.name","analog_channels.6.volt","analog_channels.6.ampRating","analog_channels.7.id","analog_channels.7.name","analog_channels.7.volt","analog_channels.7.ampRating","load_channels.0.currentRating","load_channels.0.delayTime","load_channels.0.devices.0.name","load_channels.0.devices.0.phase","load_channels.0.devices.1.name","load_channels.0.devices.1.phase","load_channels.0.devices.2.name","load_channels.0.devices.2.phase","load_channels.1.currentRating","load_channels.1.delayTime","load_channels.1.devices.0.name","load_channels.1.devices.0.phase","load_channels.1.devices.1.name","load_channels.1.devices.1.phase","load_channels.1.devices.2.name","load_channels.1.devices.2.phase","load_channels.2.currentRating","load_channels.2.delayTime","load_channels.2.devices.0.name","load_channels.2.devices.0.phase","load_channels.2.devices.1.name","load_channels.2.devices.1.phase","load_channels.2.devices.2.name","load_channels.2.devices.2.phase","load_channels.3.name","load_channels.3.currentRating","load_channels.3.delayTime","load_channels.3.devices.0.name","load_channels.3.devices.0.phase","load_channels.3.devices.1.name","load_channels.3.devices.1.phase","load_channels.3.devices.2.name","load_channels.3.devices.2.phase","load_channels.4.delayTime","load_channels.4.devices.0.name","load_channels.4.devices.0.phase","load_channels.4.devices.1.name","load_channels.4.devices.1.phase","load_channels.4.devices.2.name","load_channels.4.devices.2.phase","load_channels.5.currentRating","load_channels.5.delayTime","load_channels.5.devices.0.name","load_channels.5.devices.0.phase","load_channels.5.devices.1.name","load_channels.5.devices.1.phase","load_channels.5.devices.2.name","load_channels.5.devices.2.phase","user_preferences.currency","user_preferences.lock_energy","user_preferences.time","user_preferences.energy_unit","key","name","at_home","selected_scheme","savings_selection","battery_saver_selection","tou_selection","demand_selection","currentLoadStatus","grid_type","energy_selection"]),I=Object(h.a)(y,2),C=I[0],k=(I[1],Object(c.useState)({})),w=Object(h.a)(k,2),A=w[0],E=w[1],U=Object(c.useState)(!1),L=Object(h.a)(U,2),F=L[0],J=L[1],H=Object(c.useState)(""),Q=Object(h.a)(H,2),M=Q[0],D=Q[1];function V(e,n){u.a.get("".concat("https://eflex-web-proxy.herokuapp.com/","/api/BoxFiles/File?UserIdBin=").concat(e,"&BoxIdBin=").concat(n,"&filename=config.json")).then((function(e){return e.data})).then((function(e){!function(e){try{var n=JSON.parse(_.Buffer.from(e,"base64").toString("ascii"));s(Object(d.a)({},n));var a=S(Object(d.a)({},n)),c={};Object.keys(a).filter((function(e){return!C.includes(e)})).forEach((function(e){c[e]=a[e]})),j(Object(d.a)({},c))}catch(t){console.log("error",t),D(t.toString())}}(e)})).catch((function(e){return D(e.toString())}))}return Object(N.jsxs)("div",{className:"App",children:[Object(N.jsx)("h1",{className:"text-center text-primary",children:"Eflex"}),Object(N.jsx)(T,{errorMsg:M}),Object(N.jsxs)(b.a,{children:[Object(N.jsx)("h3",{children:"GET config file"}),Object(N.jsx)("div",{className:"border rounded p-3",children:Object(N.jsx)(f.a,{initialValues:{UserIdBin:"3rK2D4gvHAyn10CmYaKaCQ==",BoxIdBin:"EeuTzQQVrVCeIQJCCmQAAw=="},onSubmit:function(){var e=Object(o.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(n.UserIdBin,n.BoxIdBin);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),children:function(e){return Object(N.jsx)(v.a,{onSubmit:e.handleSubmit,children:Object(N.jsxs)(g.a,{className:"g-2 align-items-end",children:[Object(N.jsxs)(O.a,{md:!0,children:[Object(N.jsx)(v.a.Label,{children:"UserIdBin"}),Object(N.jsx)(v.a.Control,{required:!0,type:"text",placeholder:"UserIdBin",name:"UserIdBin",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.UserIdBin})]}),Object(N.jsxs)(O.a,{md:!0,children:[Object(N.jsx)(v.a.Label,{children:"BoxIdBin"}),Object(N.jsx)(v.a.Control,{required:!0,type:"text",placeholder:"BoxIdBin",name:"BoxIdBin",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.BoxIdBin})]}),Object(N.jsxs)(O.a,{md:!0,children:[Object(N.jsx)(x.a,{className:"mx-3",type:"submit",children:"Submit"}),Object(N.jsx)(x.a,{className:"mx-3",variant:"outline-secondary",type:"reset",onClick:e.handleReset,children:"Reset"})]})]})})}})})]}),Object(N.jsxs)(b.a,{className:"mt-2",children:[Object(N.jsx)("h5",{children:" Config JSON "}),Object(N.jsxs)(g.a,{children:[Object(N.jsx)(O.a,{md:6,children:Object(N.jsxs)(b.a,{children:[Object(N.jsx)(R,{onSearch:function(e){if(e){var n=S(Object(d.a)({},a)),c={};Object.keys(n).filter((function(n){return n.startsWith(e)})).forEach((function(e){c[e]=n[e]})),E(Object(d.a)({},c)),J(!0)}else J(!1),E({})}}),Object(N.jsx)("pre",{className:"config__viewer",dangerouslySetInnerHTML:{__html:m.a.toHtml(F?A:r)}})]})}),Object(N.jsx)(O.a,{md:6,children:Object(N.jsxs)(b.a,{className:"border rounded p-3 my-2",children:[Object(N.jsx)("h5",{children:" Summary "}),Object(N.jsx)(p.a,{striped:!0,bordered:!0,hover:!0,children:Object(N.jsxs)("tbody",{children:[Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:"Home / Away"}),Object(N.jsx)("td",{children:!1===a.at_home?"Away":"Home"})]}),Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:"Energy Selection"}),Object(N.jsx)("td",{children:a.energy_selection})]}),Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:"Battery Saver Selection"}),Object(N.jsx)("td",{children:a.battery_saver_selection})]}),Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:"TOU Selection"}),Object(N.jsx)("td",{children:a.tou_selection})]}),Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:"Demand Selection"}),Object(N.jsx)("td",{children:a.demand_selection})]}),Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:"Overriden Loads"}),Object(N.jsx)("td",{children:Array.isArray(a.load_channels)?a.load_channels.reduce((function(e,n){return function(e){if(e){var n=e.years,a=e.months,c=e.date,s=e.hours,t=e.minutes,l=e.seconds,r=e.milliseconds;return!!(n&&a&&c&&s&&t&&l&&r)&&B()().utc().year(n).month(a).date(c).hour(s).minute(t).second(l).millisecond(r).isAfter(B()().utc())}return!1}(n.override?JSON.parse(n.override):null)&&e.push(n.name),e}),[]).join(","):""})]})]})})]})})]})]})]})},A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,98)).then((function(n){var a=n.getCLS,c=n.getFID,s=n.getFCP,t=n.getLCP,l=n.getTTFB;a(e),c(e),s(e),t(e),l(e)}))};a(88);l.a.render(Object(N.jsx)(s.a.StrictMode,{children:Object(N.jsx)(w,{})}),document.getElementById("root")),A()}},[[89,1,2]]]);
//# sourceMappingURL=main.1f36f137.chunk.js.map